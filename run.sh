# COPY THIS IN THE FOLDER CONTAINING ALL THE APK FILES 

#what this does is iteratively extracts all the .apk files within the directory it is in 
#and dumps all the files to a folder outside the apkfiles folder for simplicity purposes




 #this section runs the extraction command for all the apk files within this directory
#the apktool decompile command takes too long and a lot of space to obtain the required data
#for apk in *.apk; do apktool d "$apk"; done

#constructing the environment with the tags as foldernames and the files within
for apk in $(ls | shuf -n 2000);
	do mkdir "/home/tushar/Documents/IAS/apkfiles/${apk%%.*}"; aapt dump permissions "$apk" > "/home/tushar/Documents/IAS/apkfiles/${apk%%.*}/AndroidManifest.txt"; 
	done

#using the aapt dump permissions "apkfilename.apk" command into the required path and .txt file
#for apk in *.apk; 
#	do aapt dump permissions "$apk" > "${apk%%.*}/AndroidManifest.txt"; 
#	done


	
##this command not needed as we working on the direct dataset and need the files intact
#find ~/Documents/IAS/apkfiles/ -maxdepth 1 -type f -print0 | xargs -0 #mv -t ~/Documents/IAS/dump

#this selfdestructs the bash file once its purpose is  served
#activate this command to preserve the dataset quality
#rm -- "$0"
